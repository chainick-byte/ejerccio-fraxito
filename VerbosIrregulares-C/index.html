<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/d8a93e8eec.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container" id="visible">
        <div class="container" id="todo">
            <div class="row">
                <button type="button" class="btn btn-block btn-primary"></button>
            </div>
            <div class="row">
                <button type="button" class="btn btn-block btn-secundary disabled">
                    <i class="fas fa-flag"></i>
                    Test Verbos Irregulares
                    <i class="fas fa-flag"></i>
                </button>
            </div>
            <br>
            <div class="row">
                <div class="col-4"></div>
                <div class="col-4">
                    <button type="button" class="btn btn-block btn-primary">Cambiar Partida</button>
                </div>
                <div class="col-4"></div>
            </div>
            <br>
            <div class="row">
                <button type="button" class="btn btn-block btn-secundary disabled">
                    Elige el numero de verbos
                </button>
            </div>
            <br>
            <div class="row">
                <div class="col-1"></div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('10');">10</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('20');">20</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('30');">30</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('40');">40</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('50');">50</button>
                </div>
                <div class="col-1"></div>
            </div>
            <br>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-2">
                    <button id="valor" type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('60');">60</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('70');">70</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('90');">90</button>
                </div>
                <div class="col-2">
                    <button id="valor140" type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('140');">140</button>
                </div>
                <div class="col-2"></div>

            </div>

        </div>
    </div>
    <div class="container" id="oculto">
        <div class="row">
            <button id="miNivel" type="button" class="btn btn-block btn-primary disabled"></button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-secundary disabled">
                <i class="fas fa-flag"></i>
                Test Verbos Irregulares
                <i class="fas fa-flag"></i>
            </button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-primary disabled"></button>
        </div>
        <div class="row">
            <button type="button" id="marcador" class="btn btn-block btn-primary disabled">0</button>
        </div>

        <div class="progress">
            <div id="barraProgreso" class="progress-bar bg-warning" role="progressbar" style="width: 0%;"
                aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-primary">
                <span id="adondevanlosiconos">

                </span>
            </button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-secundary disabled" id="spanishVerb"></button>
        </div>
        <br>
        <div class="row">
            <div class="col">
                <div id="primeraForma"></div>
            </div>
            <div class="col">
                <div id="segundaForma"></div>
            </div>
            <div class="col">
                <div id="terceraForma"></div>

            </div>
        </div>
        <br>
        <div class="row">
            <button id="botonComprobar" type="button" class="btn btn-block btn-primary"
                onclick="chequeaRespuesta(columna),guardarKuki(_nivelParaKuki,marcadorKuki);">Comprobar</button>
        </div>
        <br>
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <button type="button" class="btn btn-block btn-primary" onclick="cambiaNivel()">Cambia de nivel</button>
            </div>
            <div class="col-4">

            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="js/listaVerbos.js"></script>
    <script>
        //aqui van todas las variables que voy a utilizar:
        var nivel;
        var _nivel = "";
        var columna = "";
        var _coumna = "";
        var jugando = 0;
        var marcador = 0;
        var iconos = ""
        var cuadradoicono = "";
        width = 0;
        var id = 0;
        style = "";
        var alternativa = "";
        var auxiliar = [];
        var chequeDobleVerbo = 0;
        var _nivelParaKuki = "nivel" + nivel;
        var marcadorKuki;
        let arrayAuxiliar = [["was", "were"],
        ["learnt", "learnd"]
        ];

        document.getElementById("oculto").style.display = "none";
        //sera algo parecido a mi "main" , meto principal que se encarga de correcto funcionamiento de los demas metodos
        function dameNumeroDeVerbos(_nivel) {

            nivel = _nivel;
            leerKuki(nivel);
            document.getElementById("visible").style.display = "none";
            document.getElementById("oculto").style.display = "inherit";
            dameNivel(nivel);
            eligeVerbo();
            chequeaRespuesta(columna, nivel);
            _nivelParaKuki = "nivel" + nivel;
            




        }
        function dameNivel(nivel) {
            document.getElementById('miNivel').innerHTML = 'Nivel: ' + nivel;
        }
        //cheque respuesta
        
        function chequeaRespuesta(columna) {
            if (jugando == 0) {
                jugando = 1;
                //entro aqui en funcion si el verbo que me sale es igua a "ser" o "aprender"  
                var _columna = document.getElementById('miform').value;
                console.log(chequeDobleVerbo);
                if (_columna == columna) {
                    console.log(chequeDobleVerbo);
                    document.getElementById('botonComprobar').classList.remove('btn-primary');
                    document.getElementById('botonComprobar').classList.add('btn-success');
                    document.getElementById('botonComprobar').innerText = "Ooh it's correct!!!";
                    marcador++;
                    auxiliar = id;
                    marcadorKuki = marcador;
                    console.log("==============>" + marcadorKuki)



                } else {

                    document.getElementById('botonComprobar').classList.add('btn-danger');
                    document.getElementById('botonComprobar').innerText = columna;
                    marcador = 0;


                }
                console.log(marcador + "en el chequea respuesta");

            } else {

                document.getElementById('botonComprobar').classList.remove('btn-success');
                document.getElementById('botonComprobar').classList.remove('btn-danger');
                document.getElementById('botonComprobar').classList.add('btn-primary');
                document.getElementById('botonComprobar').innerText = "Comprobar";
                jugando = 0;
                marcadorKuki = marcador;
                console.log("==============>" + marcadorKuki)

                eligeVerbo(nivel);
            }

            document.getElementById('marcador').innerText = marcador;


        }
        chequeaRespuesta(columna);
        function eligeVerbo() {
            //aqui en vez de pultiplicar por 140 como originalmente se planteo , multiplico por nivel , asi selecciono primeros n verbos como se ha pedido
            var verboelegido = Math.floor(Math.random() * nivel);
            var tiempoRandom = Math.floor(Math.random() * 3);
            document.getElementById('spanishVerb').innerHTML = verbos[verboelegido][3];
            //alternativa para dobles verbos
            if (verbos[verboelegido][3] == 'ser' || verbos[verboelegido][3] == 'aprender') {
                console.log("entro en el if de elige verbo")
                //variable que me va a activar doble correccion
                chequeDobleVerbo = 1;
            }
            if (tiempoRandom == 0) {
                document.getElementById('primeraForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo" > ';
                columna = verbos[verboelegido][0];
            } else {
                document.getElementById('primeraForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="primeraForma">' + verbos[verboelegido][0] + '</button>';
            }
            if (tiempoRandom == 1) {
                document.getElementById('segundaForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo"> ';
                columna = verbos[verboelegido][1];
            } else {
                document.getElementById('segundaForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="segundaForma">' + verbos[verboelegido][1] + '</button>';
            }

            if (tiempoRandom == 2) {
                document.getElementById('terceraForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo"> ';
                columna = verbos[verboelegido][2];
            } else {
                document.getElementById('terceraForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="terceraForma">' + verbos[verboelegido][2] + '</button>';
            }


        }
        //guardo kuki aqui
        function guardarKuki(_nivelParaKuki, marcadorKuki) {
            nombre = _nivelParaKuki;
            valor = marcadorKuki;
            fecha = "31 Dec 2020 23:59:59 GMT";
            document.cookie = nombre + "=" + valor + ";expires=" + fecha;
        }
        //leo kuki aqui
        function leerKuki(nivel) {
            misCookie = document.cookie;
            contenidoCookie = misCookie.split('; ');
            for (i in contenidoCookie) {
                var arrayAuxiliar = contenidoCookie[i].split('=');
                var nivelObtenido = arrayAuxiliar[0].substring(5);
                var marcadorObtenido = arrayAuxiliar[1];
                console.log("nivelobtenido:_ " + nivelObtenido + ";" + "marcadorObtenido:_ " + marcadorObtenido);
                if(nivel==nivelObtenido){
                    console.log("hurrrrrra!")
                    marcador=marcadorObtenido;
                }

            }

        }
        //leerKuki();

        guardarKuki(_nivelParaKuki, marcadorKuki);
        function cambiaNivel() {
            location.reload();
        }
        function barraProgresso() {
            var element = document.getElementById('barraProgreso');
            progress = setInterval(function () {

                element.style.width = 100 * (marcador / nivel) + '%';

            }, 250);

        }
        barraProgresso();
    </script>
</body>

</html>